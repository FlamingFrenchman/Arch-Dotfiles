# a very sweaty nerd's i3 config file
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

# Keybinds used in default mode:
# sup+h,j,k,l               change container focus
# sup+Shift+h,j,k,l         move focused container
# sup+0..9,syms             goto workspace
# sup+Shift+0..9,syms       move focused container to workspace
# sup+Space                 focus tiling/floating
# sup+Shift+Space           toggle tiling/floating
# sup+Shift+c,r,q,z         restart, reload, quit, and quit harder
# sup+a,s,e                 change mode
# sup+n                     next workspace
# sup+p                     prev workspace
# sup+q                     kill focused container
# sup+r                     run (rofi/dmenu)
# sup+w                     horizontal split mode
# sup+t                     vertical split mode
# sup+Return                open terminal emulator
#
# As a rule of thumb I try to use shorthands (v for volume, b for browser,
# m for mute, etc.) when mapping keys so that they make sense regardless 
# of layout.
#
# Current modes are:
# - Application ($sup+a): for launching things I commonly use, like firefox,
#   Thunar, VirtualBox, the terminal, etc. This mode should be exited after
#   launching a command, so it'll work kinda like a prefix.
# - Edit ($sup+e): for editing the layout of containers
# - Status/State ($sup+s): for changing basic settings (volume, brightness,
#   redshift, etc.)

# Startup programs
exec "wal -i ~/Downloads/bork_referendum.jpg && st -e tmux"
exec_always "~/.config/i3/scripts/dunst_setup.sh"
exec_always "~/.config/i3/scripts/cleanup.sh"

# Windows/Command/Super
set $sup Mod4
# Alt/Meta, currently not used
set $mod Mod1

# scripts and programs
set $workspace_change ~/.config/i3/scripts/workspace_change.sh
set $volume_change ~/.config/i3/scripts/volume_change.sh
set $brightness_change ~/.config/i3/scripts/brightness_change.sh
set $terminal st
set $browser chromium
set $filemanager Thunar
set $monitor conky

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# Creates the gaps between windows
gaps inner 30

# Creates gaps along the outer edges of the screen
#gaps outer 10

# Creates a gap along the top of the screen
#gaps top 30

# Set the border type. Default is normal. Pixel eliminates the tile bars; none
# does... something. Normal and pixel types support an option "pixel" to
# specify border with
default_border none
default_floating_border none

# Font for window titles. Will also be used by the bar unless a different font is used in the bar {} block.
#font pango:Hack 15

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn't scale on retina/hidpi displays.

# function key volume control
bindsym XF86AudioMute exec $volume_change toggle
bindsym XF86AudioRaiseVolume exec $volume_change up
bindsym XF86AudioLowerVolume exec $volume_change down

# function key brightness control
bindsym XF86MonBrightnessUp exec $brightness_change lighten 5
bindsym XF86MonBrightnessDown exec $brightness_change darken 5

# Use Mouse+$sup to drag floating windows to their wanted position
floating_modifier $sup

# start a terminal
bindsym $sup+Return exec $terminal

# modes
bindsym $sup+a exec "i3-msg mode application && notify-send -t 3000 -u normal 'Application mode'"
bindsym $sup+s exec "i3-msg mode status && notify-send -t 3000 -u normal 'Status mode'"
bindsym $sup+e exec "i3-msg mode edit && notify-send -t 3000 -u normal 'Edit mode'"

# kill focused window
bindsym $sup+q kill

# start dmenu (a program launcher)
bindsym $sup+r exec "rofi -show run"

# change focus
bindsym $sup+h focus left
bindsym $sup+j focus down
bindsym $sup+k focus up
bindsym $sup+l focus right

# move focused window
bindsym $sup+Shift+h move left
bindsym $sup+Shift+j move down
bindsym $sup+Shift+k move up
bindsym $sup+Shift+l move right

# split in horizontal/(w)ide orientation
bindsym $sup+w split h

# split in vertical/(t)all orientation
bindsym $sup+t split v

# enter fullscreen mode for the focused container
bindsym F11 exec "i3-msg fullscreen toggle"

# toggle tiling / floating
bindsym $sup+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $sup+space focus mode_toggle

# switch to next/prev/last workspaces with content in them
bindsym $sup+n exec $workspace_change next_on_output
bindsym $sup+p exec $workspace_change prev_on_output
bindsym $sup+Tab exec $workspace_change back_and_forth

# switch to workspace
bindsym $sup+1 exec $workspace_change $ws1
bindsym $sup+2 exec $workspace_change $ws2
bindsym $sup+3 exec $workspace_change $ws3
bindsym $sup+4 exec $workspace_change $ws4
bindsym $sup+5 exec $workspace_change $ws5
bindsym $sup+6 exec $workspace_change $ws6
bindsym $sup+7 exec $workspace_change $ws7
bindsym $sup+8 exec $workspace_change $ws8
bindsym $sup+9 exec $workspace_change $ws9
bindsym $sup+0 exec $workspace_change $ws10

# make switching workspaces less awful on programmer dvorak
# order from 0 to 9 is: *()}+{][!=
bindsym $sup+parenleft      exec $workspace_change $ws1
bindsym $sup+parenright     exec $workspace_change $ws2
bindsym $sup+braceright     exec $workspace_change $ws3
bindsym $sup+plus           exec $workspace_change $ws4
bindsym $sup+braceleft      exec $workspace_change $ws5
bindsym $sup+bracketright   exec $workspace_change $ws6
bindsym $sup+bracketleft    exec $workspace_change $ws7
bindsym $sup+exclam         exec $workspace_change $ws8
bindsym $sup+equal          exec $workspace_change $ws9
bindsym $sup+asterisk       exec $workspace_change $ws10

# move focused container to next/prev/last workspace
bindsym $sup+Shift+n move container to workspace next
bindsym $sup+Shift+p move container to workspace prev
bindsym $sup+Shift+Tab move container to workspace back_and_forth
                            
# move focused container to workspace
bindsym $sup+Shift+1 move container to workspace $ws1
bindsym $sup+Shift+2 move container to workspace $ws2
bindsym $sup+Shift+3 move container to workspace $ws3
bindsym $sup+Shift+4 move container to workspace $ws4
bindsym $sup+Shift+5 move container to workspace $ws5
bindsym $sup+Shift+6 move container to workspace $ws6
bindsym $sup+Shift+7 move container to workspace $ws7
bindsym $sup+Shift+8 move container to workspace $ws8
bindsym $sup+Shift+9 move container to workspace $ws9
bindsym $sup+Shift+0 move container to workspace $ws10

# make moving workspaces less awful on programmer dvorak
# order from 0 to 9 is: *()}+{][!=
bindsym $sup+Shift+parenleft    move container to workspace $ws1
bindsym $sup+Shift+parenright   move container to workspace $ws2
bindsym $sup+Shift+braceright   move container to workspace $ws3
bindsym $sup+Shift+plus         move container to workspace $ws4
bindsym $sup+Shift+braceleft    move container to workspace $ws5
bindsym $sup+Shift+bracketright move container to workspace $ws6
bindsym $sup+Shift+bracketleft  move container to workspace $ws7
bindsym $sup+Shift+exclam       move container to workspace $ws8
bindsym $sup+Shift+equal        move container to workspace $ws9
bindsym $sup+Shift+asterisk     move container to workspace $ws10

# reload the configuration file
bindsym $sup+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $sup+Shift+r exec "~/.config/i3/scripts/refresh_workspaces.sh"
# exit i3 (logs you out of your X session)
bindsym $sup+Shift+q exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"
# really exit i3
bindsym $sup+Shift+z exec "i3-msg exit"

mode "application" {
    bindsym b exec $browser
    bindsym m exec $monitor
    bindsym f exec $filemanager
    bindsym Return exec $terminal
    bindsym Escape exec "i3-msg mode default && notify-send -t 3000 -u normal 'Default mode'"
    bindsym q exec "i3-msg mode default && notify-send -t 3000 -u normal 'Default mode'"
}

mode "status" {
    bindsym m exec $volume_change toggle
    bindsym c exec $volume_change cycle
    bindsym l exec $volume_change up
    bindsym s exec $volume_change down
    bindsym b exec $brightness_change bluen 100
    bindsym r exec $brightness_change redden 100
    bindsym n exec $brightness_change darken 5
    bindsym d exec $brightness_change lighten 5
    bindsym Escape exec "i3-msg mode default && notify-send -t 3000 -u normal 'Default mode'"
    bindsym q exec "i3-msg mode default && notify-send -t 3000 -u normal 'Default mode'"
}

mode "edit" {
    bindsym h focus left
    bindsym j focus down
    bindsym k focus up
    bindsym l focus right
    bindsym Shift+h move left
    bindsym Shift+j move down
    bindsym Shift+k move up
    bindsym Shift+l move right
    bindsym y resize shrink width 10 px or 10 ppt
    bindsym u resize grow height 10 px or 10 ppt
    bindsym i resize shrink height 10 px or 10 ppt
    bindsym o resize grow width 10 px or 10 ppt
    bindsym z workspace_layout tabbed
    bindsym s workspace_layout stacking
    bindsym d workspace_layout default
    bindsym p focus parent
    bindsym c focus child
    bindsym w split h
    bindsym t split v
    bindsym Escape exec "i3-msg mode default && notify-send -t 3000 -u normal 'Default mode'"
    bindsym q exec "i3-msg mode default && notify-send -t 3000 -u normal 'Default mode'"
}

# class        border  backgr. text    indic   child_border
client.focused #ffc9fa #ffc9fa #000000 #2e9ef4 #ffc9fa
